<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">

    <title>Handpan Touch Test 4 - Using FT FastClick library</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />

    
    <style>
        p {font-size: 50px; background-color:#c5b5f0; text-align: center;} 
        div {width: 450px; height: 400px; border-color: aqua; border-style: dashed; padding: 20px;}

    </style>
    
<!--    <script type='application/javascript' src='fastclick.js'></script>-->
    <script type="text/javascript" src="jquery-2.1.4.js"></script>
    
<script type="text/javascript">
    
   
//    Copied from http://www.storiesinflight.com/html5/audio.html
    
    var channel_max = 30;										// number of channels
	audiochannels = new Array();
	for (a=0; a<channel_max; a++) {									// prepare the channels
		audiochannels[a] = new Array();
		audiochannels[a]['channel'] = new Audio();						// create a new audio object
		audiochannels[a]['finished'] = -1;							// expected end time for this channel
	}
    
	function play_multi_sound(s) {
		for (a = 0; a < audiochannels.length; a++) {
			thistime = new Date();
			if (audiochannels[a]['finished'] < thistime.getTime()) {			// is this channel finished?
                audiochannels[a]['finished'] = thistime.getTime() + document.getElementById(s).duration*1000;
               
				audiochannels[a]['channel'].src = document.getElementById(s).src;
				audiochannels[a]['channel'].load();
				audiochannels[a]['channel'].play();
				break;
			}
		}
	}
    
    
    
    
    /* 
    On page load add an event listener for touchstart
    When a touchstart event is triggered, play the sound file in the audio element.
    */
    
//    
//     window.addEventListener('load', function(){ // on page load
// 
//    document.getElementById('touchme1').addEventListener('touchend', function(e){
//       play_multi_sound('multiaudio1');}, false);
//}, false);
//    
//    
    
    
    window.addEventListener('load', function(){ // on page load
 
    document.getElementById('touchme1').addEventListener('touchstart', function(e){
       play_multi_sound('multiaudio1');}, false);
        
    document.getElementById('touchme2').addEventListener('touchstart', function(e){
       play_multi_sound('multiaudio2');}, false);
            
    document.getElementById('touchme3').addEventListener('touchstart', function(e){
       play_multi_sound('multiaudio3');
    }, false);
         
    e.preventDefault();
        
}, false);
    
    // Add FastClick
//
//   if ('addEventListener' in document) {
//    document.addEventListener('DOMContentLoaded', function() {
//        FastClick.attach(document.body);
//    }, false);
//}
    
     
    </script>
    
</head>
<body>
   
    
    <audio id="multiaudio1" src="8notesDiatoAmV4A3.mp3" preload="auto"></audio>
    <audio id="multiaudio2" src="8notesDiatoAmV4A4.mp3" preload="auto"></audio>
    <audio id="multiaudio3" src="8notesDiatoAmV4B3.mp3" preload="auto"></audio>
   
    <p id="touchme1">Pass string A3A3A3A3</p>
    
    <p id="touchme2">Pass string A4A4A4A4</p>
    
    <p id="touchme3">Pass string B3B3B3B3B3</p>  
</body>
</html>
